{"ast":null,"code":"import _asyncToGenerator from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useSnackbar}from'notistack';import{useHistory,NavLink,useParams}from\"react-router-dom\";import{useToken}from'../../Components/Hooks/useToken';//import bomLogo from \"../Pages/img/baptists-on-mission-logo.png\"\n//import signInImg from \"../Pages/img/sign-in-page-image.jpg\"\nimport axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var params=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useToken=useToken(),_useToken2=_slicedToArray(_useToken,2),token=_useToken2[0],setToken=_useToken2[1];var history=useHistory();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,closeSnackbar=_useSnackbar.closeSnackbar;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var isValid,response,redirectUrl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();isValid=username!=undefined||password!=undefined?true:false;if(isValid){_context.next=7;break;}enqueueSnackbar('Please fill out the username and password');return _context.abrupt(\"return\");case 7:_context.next=9;return axios.post(\"https://bomreactapi.azurewebsites.net/login/authenticate\",{username:username,password:password});case 9:response=_context.sent;if(!(response&&response.data!==undefined)){_context.next=16;break;}//console.log('After response', response.data);\nsetToken(response.data);enqueueSnackbar(\"Login Successful\");//have a redirect url\nif(params){redirectUrl=params.redirectUrl;redirectUrl?history.push(redirectUrl):history.push('/events');}else{history.push('/events');}_context.next=18;break;case 16:enqueueSnackbar(\"Whoops, something happened.  Please try again\");return _context.abrupt(\"return\");case 18:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();function loginUser(_x2,_x3){return _loginUser.apply(this,arguments);}function _loginUser(){_loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:axios.post(\"https://bomreactapi.azurewebsites.net/login/authenticate?\"+\"username=\"+username+\"&password=\"+password).then(function(data){//console.log('Server response with token:', data);\nreturn data;}).catch(function(err){return err;});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _loginUser.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"b-login-holder\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-login\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",placeholder:\"Email Address\",onChange:function onChange(e){return setUserName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-default button-full-width\",href:\"#\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"problem-text\",children:\"If you have any problems signing in, please contact us at (800) 395-5102 ext 5596\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-5\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(NavLink,{to:\"/createaccount\",children:\"Create Account\"})]})]})})})})});}","map":{"version":3,"sources":["/Users/joshuaadams/Documents/BOM/src/Client/Pages/Login.js"],"names":["React","useState","useSnackbar","useHistory","NavLink","useParams","useToken","axios","Login","params","username","setUserName","password","setPassword","token","setToken","history","enqueueSnackbar","closeSnackbar","handleSubmit","e","preventDefault","isValid","undefined","post","response","data","redirectUrl","push","loginUser","then","catch","err","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { useSnackbar } from 'notistack';\nimport { useHistory, NavLink , useParams } from \"react-router-dom\";\nimport {useToken} from '../../Components/Hooks/useToken'\n//import bomLogo from \"../Pages/img/baptists-on-mission-logo.png\"\n//import signInImg from \"../Pages/img/sign-in-page-image.jpg\"\nimport axios from 'axios'\n\n\n\n\nexport default function Login(){\n    const params = useParams();\n    const [username, setUserName]= useState();\n    const [password, setPassword] = useState();\n    const [token, setToken] = useToken();\n    const history = useHistory();\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    \n    \n    const handleSubmit = async e => {\n        e.preventDefault();\n        var isValid = (username != undefined || password !=undefined) ? true : false;\n        if(!isValid)\n        {\n          enqueueSnackbar('Please fill out the username and password')\n          return;\n        }\n        else{\n          let response = await axios.post(\"https://bomreactapi.azurewebsites.net/login/authenticate\",{username, password});\n\n          //console.log('This is back from server', typeof response);\n          if(response && response.data !== undefined)\n          {\n            //console.log('After response', response.data);\n            setToken(response.data);\n            enqueueSnackbar(\"Login Successful\");\n            //have a redirect url\n            if(params){\n              let redirectUrl = params.redirectUrl;\n              redirectUrl ? history.push(redirectUrl) : history.push('/events');\n            }\n            else{\n            history.push('/events');\n            }\n          }\n          else{\n            enqueueSnackbar(\"Whoops, something happened.  Please try again\")\n            return;\n          }\n         \n        }\n    }\n\n   async function loginUser(username, password){\n      \n       axios.post(\"https://bomreactapi.azurewebsites.net/login/authenticate?\" + \"username=\" + username + \"&password=\" + password)\n        .then(data => {\n          //console.log('Server response with token:', data);\n          return data;\n        })\n        .catch(function(err){\n          return err;\n        })\n    }\n\n    return(\n        <div className=\"col-md-12\">\n    <div>\n    <section className=\"b-login-holder\">\n      <div className=\"content\">\n        <div className=\"page-login\">\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"exampleInputEmail1\">Email Address</label>\n              <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Email Address\" onChange={e=> setUserName(e.target.value)}/>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"exampleInputPassword1\">Password</label>\n              <input type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" onChange={e=> setPassword(e.target.value)} />\n            </div>\n            <button type=\"submit\" className=\"button-default button-full-width\" href=\"#\">Sign In</button>\n          </form>\n          <p className=\"problem-text\">If you have any problems signing in, please contact us at (800) 395-5102 ext 5596</p>\n          <hr/>\n          <p className=\"mb-5\">Don't have an account? <NavLink to=\"/createaccount\">Create Account</NavLink></p>\n        </div>\n      </div>\n    </section>\n    </div>\n  </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}
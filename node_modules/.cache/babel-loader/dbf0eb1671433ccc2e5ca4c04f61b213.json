{"ast":null,"code":"import _asyncToGenerator from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useHistory}from'react-router-dom';import{DataGrid,GridToolbar}from'@mui/x-data-grid';import Select from\"react-select\";import EventsTile from'./EventsTile';import NoResults from'../../../Components/NoResults';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EventsAndOpportunities=function EventsAndOpportunities(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredData=_useState4[0],setFilteredData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),drpCateogory=_useState10[0],setDrpCategory=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),search=_useState12[0],setSearch=_useState12[1];var history=useHistory();var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),hasFilterData=_useState14[0],setHasFilterData=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),categoriesList=_useState16[0],setCategoriesList=_useState16[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var categoriesResult,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios('https://bomreactapi.azurewebsites.net/events/getcategories');case 4:categoriesResult=_context.sent;setCategoriesList(JSON.parse(categoriesResult.data));console.log('categories list fetched from api: ',categoriesResult.data);_context.next=9;return axios('https://bomreactapi.azurewebsites.net/events/getevents');case 9:result=_context.sent;setData(result.data);console.log(result.data);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);setError(true);case 17:setIsLoading(false);//console.log(data);\ncase 18:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleCategoryChange=function handleCategoryChange(option){setDrpCategory({drpCateogory:option.value});};var handleSearchChange=function handleSearchChange(option){setSearch(option.value);var value=option.target.value.toLowerCase();var result=data.filter(function(item){return item[\"BP_Title\"].toLowerCase().includes(value)||item[\"BP_Description\"].toLowerCase().includes(value);});setFilteredData(function(arr){return result;});};return/*#__PURE__*/_jsxs(\"div\",{id:\"\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"full-row yellow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row pt-4 pb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 pt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Select Categories\",options:categoriesList,value:drpCateogory,onChange:setDrpCategory})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 pt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{name:\"search\",type:\"text\",maxLength:\"200\",id:\"\",className:\"form-control\",placeholder:\"Search Events...\",value:search,onChange:handleSearchChange})})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"full-row white\",children:/*#__PURE__*/_jsx(\"ul\",{id:\"event-grid\",children:filteredData&&filteredData.length>0?filteredData.map(function(singleEvent){return/*#__PURE__*/_jsx(EventsTile,{Event:singleEvent,Categories:categoriesList},singleEvent.EventsID);}):filteredData.length>0?/*#__PURE__*/_jsx(NoResults,{}):data.map(function(singleEvent){return/*#__PURE__*/_jsx(EventsTile,{Event:singleEvent,Categories:categoriesList},singleEvent.EventsID);})})})]});};export default EventsAndOpportunities;","map":{"version":3,"sources":["/Users/joshuaadams/Documents/BOM/src/Client/Pages/Profile/EventsAndOpportunities.js"],"names":["React","useState","useEffect","axios","useHistory","DataGrid","GridToolbar","Select","EventsTile","NoResults","EventsAndOpportunities","props","data","setData","filteredData","setFilteredData","isLoading","setIsLoading","error","setError","drpCateogory","setDrpCategory","search","setSearch","history","hasFilterData","setHasFilterData","categoriesList","setCategoriesList","fetchData","categoriesResult","JSON","parse","console","log","result","handleCategoryChange","option","value","handleSearchChange","target","toLowerCase","filter","item","includes","arr","length","map","singleEvent","EventsID"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from \"react\";\nimport axios from \"axios\"\nimport { useHistory } from 'react-router-dom';\nimport { DataGrid , GridToolbar } from '@mui/x-data-grid';\nimport Select from \"react-select\";\nimport EventsTile from './EventsTile'\nimport NoResults from '../../../Components/NoResults'\n\n\nconst EventsAndOpportunities = (props) => {\n  const [data, setData] = useState([]);\n  const [filteredData,setFilteredData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [drpCateogory, setDrpCategory] = useState();\n  const [search, setSearch] = useState('');\n  const history = useHistory();\n  const [hasFilterData, setHasFilterData] = useState();\n  const [categoriesList, setCategoriesList] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try{\n          const categoriesResult = await axios('https://bomreactapi.azurewebsites.net/events/getcategories');\n          setCategoriesList(JSON.parse(categoriesResult.data));\n          console.log('categories list fetched from api: ',categoriesResult.data);\n\n          const result = await axios(\n            'https://bomreactapi.azurewebsites.net/events/getevents',\n          );\n          setData(result.data);\n          console.log(result.data);\n      }\n        catch(error){\n        setError(true)\n      }\n \n      \n      setIsLoading(false);\n      //console.log(data);\n    };\n \n    fetchData();\n  }, []);\n\n  const handleCategoryChange = option => {\n    setDrpCategory({ drpCateogory: option.value});\n   }\n\n   const handleSearchChange = option => {\n       setSearch(option.value);\n       let value = option.target.value.toLowerCase();\n       let result = data.filter(item => \n        item[\"BP_Title\"].toLowerCase().includes(value) ||\n        item[\"BP_Description\"].toLowerCase().includes(value)\n       );\n        setFilteredData(arr => result);\n       \n   }\n\n\n  return (\n<div id=\"\">\n    <div className=\"full-row yellow\">\n        <div className=\"container-fluid\">\n            <div className=\"row pt-4 pb-4\">\n                <div className=\"col-md-6 pt-3\">\n                    <div className=\"form-group\">\n                        <Select placeholder=\"Select Categories\"  options={categoriesList} value={drpCateogory} onChange={setDrpCategory}/>\n                    </div>\n                </div>\n                <div className=\"col-md-6 pt-3\">\n                    <div className=\"form-group\">\n                         <input name=\"search\" type=\"text\" maxLength=\"200\" id=\"\" className=\"form-control\" placeholder=\"Search Events...\" value={search} onChange={handleSearchChange} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div className=\"full-row white\">\n            <ul id=\"event-grid\">  \n                { filteredData && filteredData.length > 0 ? (\n                    filteredData.map(singleEvent =>\n                        <EventsTile key={singleEvent.EventsID} Event={singleEvent} Categories={categoriesList}/>\n                    )\n\n                ) : \n                \n            filteredData.length > 0 ? <NoResults/> :\n                data.map(singleEvent =>\n                    <EventsTile key={singleEvent.EventsID} Event={singleEvent} Categories={categoriesList}/>\n                )  }\n                \n            </ul>\n    </div>\n </div>\n         ) \n}\n\n\n\nexport default EventsAndOpportunities;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _asyncToGenerator from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import EventType from\"./EventType\";import{useHistory}from'react-router-dom';import{DataGrid,GridToolbar,GridRowParams}from'@mui/x-data-grid';import{Button}from\"@mui/material\";import{useSnackbar}from'notistack';import dompurify from'dompurify';//import { authHeader } from '../Authentication/authHeader'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GetEvents=function GetEvents(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categoriesList=_useState4[0],setCategoriesList=_useState4[1];// const [filteredData, setFilteredData] = useState([]);\nvar _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];// const [search, setSearch] = useState('');\nvar history=useHistory();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,closeSnackbar=_useSnackbar.closeSnackbar;//console.log(localStorage.getItem('user'));\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var categoriesListResult,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get('https://bomreactapi.azurewebsites.net/events/getcategories');case 4:categoriesListResult=_context.sent;setCategoriesList(categoriesListResult.data);_context.next=8;return axios('https://bomreactapi.azurewebsites.net/events/getevents');case 8:result=_context.sent;setData(result.data);enqueueSnackbar('Events fetch success');_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);setError(true);enqueueSnackbar('Event fetch failed');case 17:setIsLoading(false);//console.log(data);\ncase 18:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleClone=function handleClone(event,cellValues){//console.log(cellValues.row);\nenqueueSnackbar('Event Cloned');};var viewAttendees=function viewAttendees(event,cellValues){history.push('/admin/events/attendees/'+cellValues.row[\"EventsID\"]);};var columns=[{field:\"Actions\",width:275,renderCell:function renderCell(cellValues){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(event){event.ignore=true;handleClone(event,cellValues);},children:\"Clone\"}),\" |\",/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(event){event.ignore=true;viewAttendees(event,cellValues);},children:\"View Attendees\"})]});}},{field:'EventsID',headerName:'ID',width:75},{field:'BP_Type',headerName:'Type',width:100},{field:'BP_Title',headerName:'Title',width:200},{field:'BP_Address',headerName:'Address',width:200},{field:'BP_Categories',headerName:'Categories',width:300,renderCell:function renderCell(cellValues){var returnVal='';var splitVals=cellValues.value.split(';');splitVals.map(function(catid){var cat=categoriesList===null||categoriesList===void 0?void 0:categoriesList.find(function(x){return x.CategoryID==catid;});returnVal+=cat===null||cat===void 0?void 0:cat.CategoryDisplayName;});return returnVal;}}];var gridStyle={width:1000};return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:\"Error occurred while fetching api, Please contact an admin\"}),isLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading ...\"}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DataGrid,{flexGrow:true,autoHeight:true,autoPageSize:true,pageSize:100,columns:columns,rows:data,getRowId:function getRowId(row){return row.EventsID;}//onRowClick={(row) => history.push(\"/events/edit/\" + row.id)} \n,onRowClick:function onRowClick(params,event){if(!event.ignore){history.push(\"/admin/events/edit/\"+params.row.EventsID);//console.log(\"push -> /roles/\" + params.row.id);\n}},components:{Toolbar:GridToolbar},disableMultipleSelection:true,disableSelectionOnClick:true})})]});};export default GetEvents;","map":{"version":3,"sources":["/Users/joshuaadams/Documents/BOM/src/Admin/Events/GetEvents.js"],"names":["React","useState","useEffect","axios","EventType","useHistory","DataGrid","GridToolbar","GridRowParams","Button","useSnackbar","dompurify","GetEvents","props","data","setData","categoriesList","setCategoriesList","isLoading","setIsLoading","error","setError","history","enqueueSnackbar","closeSnackbar","fetchData","get","categoriesListResult","result","handleClone","event","cellValues","viewAttendees","push","row","columns","field","width","renderCell","ignore","headerName","returnVal","splitVals","value","split","map","catid","cat","find","x","CategoryID","CategoryDisplayName","gridStyle","color","EventsID","params","Toolbar"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from \"react\";\nimport axios from \"axios\"\nimport EventType from \"./EventType\"\nimport { useHistory } from 'react-router-dom';\nimport { DataGrid , GridToolbar, GridRowParams} from '@mui/x-data-grid';\nimport { Button } from \"@mui/material\";\nimport { useSnackbar } from 'notistack';\nimport dompurify from 'dompurify'\n//import { authHeader } from '../Authentication/authHeader'\n\n\n\nconst GetEvents = (props) => {\n  const [data, setData] = useState([]);\n  const [categoriesList, setCategoriesList] = useState([]);\n // const [filteredData, setFilteredData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(false);\n // const [search, setSearch] = useState('');\n  const history = useHistory();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  //console.log(localStorage.getItem('user'));\n\n  useEffect(() => {\n    \n    const fetchData = async () => {\n      setIsLoading(true);\n      try{\n\n        const categoriesListResult = await axios.get('https://bomreactapi.azurewebsites.net/events/getcategories');\n        setCategoriesList(categoriesListResult.data);\n\n        const result = await axios(\n            'https://bomreactapi.azurewebsites.net/events/getevents', \n        );\n        setData(result.data);\n        enqueueSnackbar('Events fetch success');\n      }\n        catch(error){\n        setError(true)\n        enqueueSnackbar('Event fetch failed');\n      }\n \n      \n      setIsLoading(false);\n      //console.log(data);\n    };\n \n    fetchData();\n  }, []);\n\n  const handleClone = (event, cellValues) => {\n    //console.log(cellValues.row);\n    enqueueSnackbar('Event Cloned');\n  };\n\n  const viewAttendees = (event, cellValues) => {\n    \n    history.push('/admin/events/attendees/' + cellValues.row[\"EventsID\"]);\n  };\n\n  const columns = [\n    {\n      field: \"Actions\", width:275,\n      renderCell: (cellValues) => {\n        return (\n          <div>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={(event) => {\n              event.ignore = true;\n              handleClone(event, cellValues);\n            }}\n          >\n            Clone\n          </Button> | \n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={(event) => {\n              event.ignore = true;\n              viewAttendees(event, cellValues);\n            }}\n          >\n            View Attendees\n          </Button>\n          </div>\n        );\n      }\n    },\n    { field: 'EventsID', headerName: 'ID', width:75 },\n    { field: 'BP_Type', headerName: 'Type', width:100},\n    { field: 'BP_Title', headerName: 'Title', width:200},\n    { field: 'BP_Address', headerName:'Address', width:200},\n    { field: 'BP_Categories', headerName:'Categories', width:300,\n    renderCell: (cellValues) => {\n      let returnVal ='';\n      let splitVals = cellValues.value.split(';');\n      splitVals.map((catid) => \n      {\n          let cat = categoriesList?.find(x=> x.CategoryID == catid);\n          returnVal += cat?.CategoryDisplayName;\n          \n      }\n      );\n      return (\n        returnVal    \n      )\n    },\n  },\n  ];\n\n\n  const gridStyle = {\n    width: 1000,\n  }\n  \n  return (\n          <div>\n            {error && (\n              <div style={{ color: `red` }}>\n                Error occurred while fetching api, Please contact an admin\n              </div>\n            )}\n            {isLoading ? (\n        <div>Loading ...</div>\n          ) : (\n            \n            <div>\n                <DataGrid flexGrow autoHeight={true} autoPageSize={true} pageSize={100} columns={columns} rows={data} getRowId={(row) => row.EventsID} \n                //onRowClick={(row) => history.push(\"/events/edit/\" + row.id)} \n                onRowClick={(params, event) => {\n                  if (!event.ignore) {\n                    history.push(\"/admin/events/edit/\" + params.row.EventsID)\n                    //console.log(\"push -> /roles/\" + params.row.id);\n                  }\n                }}\n                components={{Toolbar: GridToolbar,}} \n                disableMultipleSelection={true} \n                disableSelectionOnClick={true} \n                /> \n            </div>\n           \n          )}\n          </div>) \n}\n\n\n\nexport default GetEvents\n\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _asyncToGenerator from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/joshuaadams/Documents/BOM/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from\"react\";import{useState,useEffect}from\"react\";import{useParams,NavLink}from\"react-router-dom\";import axios from\"axios\";import{useHistory}from'react-router-dom';import RegistrationForm from\"../Forms/BackEnd/RegistrationForm\";import{DataGrid,GridToolbar,GridRowParams}from'@mui/x-data-grid';import{useSnackbar}from'notistack';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Registration=function Registration(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var history=useHistory();var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),bomEvent=_useState8[0],setEvent=_useState8[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,closeSnackbar=_useSnackbar.closeSnackbar;var params=useParams();var eventid=params.eventid;console.log(params.eventid);var columns=[{field:'RegistrationID',headerName:'ID',width:200},{field:'RegistrationName',headerName:'Title',width:400},{field:'RegistrationCost',headerName:'Cost',width:200},{field:'RegistrationDescription',headerName:'Description',width:300}];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios({method:'get',url:'https://bomreactapi.azurewebsites.net/events/getregistrations?eventid='+eventid,data:{eventid:eventid// This is the body part\n}});case 4:result=_context.sent;setData(result.data);console.log(result.data);enqueueSnackbar('Registrations fetch success');_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setError(true);//enqueueSnackbar('Event fetch failed');\ncase 13:setIsLoading(false);//console.log(data);\ncase 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:\"Error occurred while fetching api, Please contact an admin\"}),isLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading ...\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavLink,{className:\"btn\",to:\"/admin/events/edit/registration/add/\"+eventid,children:\"Add Registration\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',height:'500px',width:'1000px'},children:/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1},children:/*#__PURE__*/_jsx(DataGrid,{columns:columns,rows:data,getRowId:function getRowId(row){return row.RegistrationID;},onRowClick:function onRowClick(row,event){if(!event.ignore){history.push(\"/admin/events/edit/registration/\"+eventid+'/'+row.RegistrationID);}},components:{Toolbar:GridToolbar},disableMultipleSelection:true,disableSelectionOnClick:true})})})]})]});};export default Registration;","map":{"version":3,"sources":["/Users/joshuaadams/Documents/BOM/src/Admin/Events/Registration.js"],"names":["React","Component","useState","useEffect","useParams","NavLink","axios","useHistory","RegistrationForm","DataGrid","GridToolbar","GridRowParams","useSnackbar","Registration","props","data","setData","isLoading","setIsLoading","error","setError","history","bomEvent","setEvent","enqueueSnackbar","closeSnackbar","params","eventid","console","log","columns","field","headerName","width","fetchData","method","url","result","color","display","height","flexGrow","row","RegistrationID","event","ignore","push","Toolbar"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\"\nimport {useState,useEffect} from \"react\"\nimport {useParams, NavLink} from \"react-router-dom\"\nimport axios from \"axios\"\nimport { useHistory } from 'react-router-dom';\nimport RegistrationForm from \"../Forms/BackEnd/RegistrationForm\";\nimport { DataGrid , GridToolbar, GridRowParams} from '@mui/x-data-grid';\nimport { useSnackbar } from 'notistack';\n\nconst Registration = (props) => {\n   \n    const [data, setData] = useState([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const history = useHistory();\n    const [bomEvent, setEvent] = useState({});\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    const params = useParams();\n\n    const eventid = params.eventid;\n    console.log(params.eventid);\n\n    const columns = [\n        { field: 'RegistrationID', headerName: 'ID', width:200 },\n        { field: 'RegistrationName', headerName: 'Title', width:400},\n        { field: 'RegistrationCost', headerName: 'Cost', width:200},\n        { field: 'RegistrationDescription', headerName:'Description', width:300}\n      ];\n    \n      useEffect(() => {\n        const fetchData = async () => {\n          setIsLoading(true);\n          try{\n              const result = await axios({\n                method: 'get',\n                url: 'https://bomreactapi.azurewebsites.net/events/getregistrations?eventid=' + eventid,\n                data: {\n                    eventid: eventid, // This is the body part\n                }\n              });\n              setData(result.data);\n              console.log(result.data);\n              enqueueSnackbar('Registrations fetch success');\n          }\n            catch(error){\n            setError(true)\n            //enqueueSnackbar('Event fetch failed');\n          }\n     \n          \n          setIsLoading(false);\n          //console.log(data);\n        };\n  \n        fetchData();\n    }, []);\n  \n    \n \n\n    return(\n<div>\n            {error && (\n              <div style={{ color: `red` }}>\n                Error occurred while fetching api, Please contact an admin\n              </div>\n            )}\n            {isLoading ? (\n        <div>Loading ...</div>\n          ) : (\n            <div>\n                <NavLink className=\"btn\" to={\"/admin/events/edit/registration/add/\" + eventid}>Add Registration</NavLink>\n            <div style={{ display: 'flex', height: '500px', width:'1000px' }}>\n                \n              <div style={{ flexGrow: 1 }}>\n              <DataGrid columns={columns} rows={data} getRowId={(row) => row.RegistrationID}  \n                onRowClick={(row, event) => {\n                  if (!event.ignore) {\n                    history.push(\"/admin/events/edit/registration/\" + eventid + '/' + row.RegistrationID)\n                  }\n                }}\n                components={{Toolbar: GridToolbar,}} \n                disableMultipleSelection={true} \n                disableSelectionOnClick={true} \n                /> \n              </div>\n            </div>\n            </div>\n          )}\n          </div>) \n                  \n    }\n\n\nexport default Registration"]},"metadata":{},"sourceType":"module"}